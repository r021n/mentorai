<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Laporan Jawaban Siswa</title>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
      }

      table,
      th,
      td {
        border: 1px solid #ddd;
        padding: 4px;
      }
      th {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <h1>Laporan Jawaban Siswa</h1>
    <table>
      <thead>
        <tr>
          <th>No</th>
          <th>Nama Siswa</th>
          <% questions.forEach((question, index) => { %>
          <!-- <th>Soal ke <%= index + 1 %></th> -->
          <th>Jawaban ke <%= index + 1 %></th>
          <th>Feedback ke <%= index + 1 %></th>
          <% }) %>
          <th>Total Skor</th>
        </tr>
      </thead>
      <tbody>
        <% if(students.length === 0){ %>
        <tr>
          <td colspan="<%= 2 + questions.length * + 1%>">
            Tidak ada data jawaban siswa
          </td>
        </tr>
        <% } else { %> <% students.forEach((student, idx) => { %>
        <tr>
          <td><%= idx + 1 %></td>
          <td><%= student.username %></td>
          <% questions.forEach(question => { %>
          <!-- tampilkan soal dari table questions -->
          <!-- <td><%- question.question %></td> -->
          <% if(student.answers[question.id]) { %>
          <td><%= student.answers[question.id].answer%></td>
          <td><%= student.answers[question.id].feedback%></td>
          <% } else { %>
          <td>-</td>
          <td>-</td>
          <% } %> <% }); %>
          <td><%= student.totalScore %></td>
        </tr>
        <% }); %> <% } %>
      </tbody>
    </table>

    <br />
    <a href="/dashboard">Kembali ke dashboard</a>
  </body>
</html>
